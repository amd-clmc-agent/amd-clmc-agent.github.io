<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>hermes core: src/SL_user_sensor_proc_unix.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">hermes core
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SL_user_sensor_proc_unix.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;SL_system_headers.h&quot;</code><br/>
<code>#include &quot;utility.h&quot;</code><br/>
<code>#include &quot;SL.h&quot;</code><br/>
<code>#include &quot;SL_common.h&quot;</code><br/>
<code>#include &quot;SL_user.h&quot;</code><br/>
<code>#include &quot;SL_sensor_proc.h&quot;</code><br/>
<code>#include &quot;SL_shared_memory.h&quot;</code><br/>
<code>#include &quot;SL_motor_servo.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="raw__data__access_8h_source.html">raw_data_access.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a692d0a05c4be870c586ad0a6db3cc0ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a692d0a05c4be870c586ad0a6db3cc0ab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TIME_OUT_NS</b>&#160;&#160;&#160;1000000000</td></tr>
<tr class="separator:a692d0a05c4be870c586ad0a6db3cc0ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a21c6fe91dc4087b48c5b34f9cdcac742"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#a21c6fe91dc4087b48c5b34f9cdcac742">receive_sim_state</a> (void)</td></tr>
<tr class="separator:a21c6fe91dc4087b48c5b34f9cdcac742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5172103b4261a0d4e95673c22ea59c7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#a5172103b4261a0d4e95673c22ea59c7c">receive_misc_sensors</a> (void)</td></tr>
<tr class="separator:a5172103b4261a0d4e95673c22ea59c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed40be1061e3dedd7a719b397139fdb9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#aed40be1061e3dedd7a719b397139fdb9">send_des_command</a> (void)</td></tr>
<tr class="separator:aed40be1061e3dedd7a719b397139fdb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a926c062c0549d68f81d65469201d4568"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#a926c062c0549d68f81d65469201d4568">init_user_sensor_processing</a> (void)</td></tr>
<tr class="separator:a926c062c0549d68f81d65469201d4568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0f09da8c9d37284b2b6c396d350e04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#aba0f09da8c9d37284b2b6c396d350e04">read_user_sensors</a> (SL_Jstate *raw, double *misc_raw)</td></tr>
<tr class="separator:aba0f09da8c9d37284b2b6c396d350e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d73c433314382a2a547f148152ad0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#ad2d73c433314382a2a547f148152ad0f">send_user_commands</a> (SL_Jstate *command)</td></tr>
<tr class="separator:ad2d73c433314382a2a547f148152ad0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80430d132cf66af6d8f0002b218b0b0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#a80430d132cf66af6d8f0002b218b0b0d">user_controller</a> (double *u, double *uf)</td></tr>
<tr class="separator:a80430d132cf66af6d8f0002b218b0b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4dd99dfdd76e602302d4511b92e0daa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SL__user__sensor__proc__unix_8cpp.html#ae4dd99dfdd76e602302d4511b92e0daa">userCheckForMessage</a> (char *name, int k)</td></tr>
<tr class="separator:ae4dd99dfdd76e602302d4511b92e0daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aed7970fe3a8d228b0d505cc736d8cee0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed7970fe3a8d228b0d505cc736d8cee0"></a>
<a class="el" href="classRawDataAccess.html">RawDataAccess</a>&#160;</td><td class="memItemRight" valign="bottom"><b>raw_data</b></td></tr>
<tr class="separator:aed7970fe3a8d228b0d505cc736d8cee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a766e45c0d7544d469a93701a545a9458"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a766e45c0d7544d469a93701a545a9458"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>motor_servo_errors</b></td></tr>
<tr class="separator:a766e45c0d7544d469a93701a545a9458"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1>============================================================================= </h1>
<dl class="section author"><dt>Author</dt><dd>Ludovic Righetti </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec 17 2009 <hr/>
 </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd></dd></dl>
<p>performs reading of sensors, translation to units, and sending out motor commands. This version of the functions is talking to the CBcomm program via shared memory and is intended to control the real robot </p>
<hr/>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a926c062c0549d68f81d65469201d4568"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int init_user_sensor_processing </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>init_user_sensor_processing </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Nov. 2007</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">      Initializes all user specific sensory processing
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output </p>
<pre class="fragment">none</pre> 
</div>
</div>
<a class="anchor" id="aba0f09da8c9d37284b2b6c396d350e04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_user_sensors </td>
          <td>(</td>
          <td class="paramtype">SL_Jstate *&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>misc_raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>read_user_sensors </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec 1997</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">gets sensor readings from the robot and converts them into standard
units
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">raw</td><td>: the raw sensor readings </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">misc_raw</td><td>the raw miscelleneous sensor readings </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5172103b4261a0d4e95673c22ea59c7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int receive_misc_sensors </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>receive_misc_sensors </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Nov. 2007 </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">    receives the entire misc_sim_sensors from shared memory
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output </p>
<pre class="fragment">none</pre> 
</div>
</div>
<a class="anchor" id="a21c6fe91dc4087b48c5b34f9cdcac742"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int receive_sim_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>receive_sim_state </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Nov. 2007</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">    recieves the entire joint_sim_state from shared memory
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output </p>
<pre class="fragment">none</pre> 
</div>
</div>
<a class="anchor" id="aed40be1061e3dedd7a719b397139fdb9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_des_command </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>send_des_command </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Nov. 2007</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">    send the commands from the joint_sim_state shared memory
    structure
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output </p>
<pre class="fragment">none</pre> 
</div>
</div>
<a class="anchor" id="ad2d73c433314382a2a547f148152ad0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int send_user_commands </td>
          <td>(</td>
          <td class="paramtype">SL_Jstate *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>send_user_commands </dd></dl>
<dl class="section date"><dt>Date</dt><dd>April 1999</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">translates the commands into raw and sends them to the robot
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">commands</td><td>: the structure containing the commands </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a80430d132cf66af6d8f0002b218b0b0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void user_controller </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>uf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>user_controller </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb. 2009</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">      allows the user to modify the commands currently computed by 
      the active controller. Note that only u is actually used in
      the final send out of the commands to the robot, and ufb is only
      to kept as feedback to the user for data collection.
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">u</td><td>: the current total command </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ufb</td><td>: the current feedback command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae4dd99dfdd76e602302d4511b92e0daa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void userCheckForMessage </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<dl class="section note"><dt>Note</dt><dd>userCheckForMessage </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb. 2009</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><pre class="fragment">      this function allows the user to intercept a message send to the
      motor servo and use this information in sensor_user_proc
</pre></dd></dl>
<p>Function Parameters: [in]=input,[out]=output</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>: message identifying name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">k</td><td>: index of message in shared memory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 7 2017 10:47:33 for hermes core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
